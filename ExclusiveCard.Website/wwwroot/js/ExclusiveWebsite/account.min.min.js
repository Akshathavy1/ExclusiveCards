var Account=function(){"use strict";function t(n,t){var i=$.Deferred();return $("#infoMessage").html(t),$("#dialog-confirm").dialog({title:n,draggable:!1,autoResize:!0,resizable:!1,open:function(){$(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()},modal:!0,buttons:{Close:{id:"btnYesId",text:"Close",click:function(){$("#infoMessage").html("");$(this).dialog("close");i.resolve("Yes")},"class":"btnYes"}}}),i.promise()}function r(n){var t="";null!==n&&(t=n.serialize());$.ajax({url:"/Account/Save",beforeSend:function(){},type:"POST",data:t,cache:!1,complete:function(){},success:function(n){n.success?(n.data.id>0&&($("#btnContinuePayment").prop("disabled",!1),$(this).toggleClass("active"),toastr.success("Account created succesfully.")),setTimeout(function(){window.location.href="/Home"},1500)):($("#btnContinuePayment").prop("disabled",!1),$(this).toggleClass("active"),toastr.error(n.errorMessage))},error:function(n){$("#btnContinuePayment").prop("disabled",!1);$(this).toggleClass("active");toastr.error(n.responseText)}})}function u(n){$.ajax({url:"/Account/CreateAddOn",beforeSend:function(){},type:"POST",data:n.serialize(),cache:!1,complete:function(){},success:function(n){n.success?(n.data.id>0&&toastr.success("Membership card created succesfully."),setTimeout(function(){window.location.href="/Account/AccountSummary"},1500)):null!==n.errorMessage&&($("#btnContinuePayment").prop("disabled",!1),toastr.error(n.errorMessage))},error:function(n){""===n.responseText?(toastr.success("Membership card created succesfully."),setTimeout(function(){window.location.href="/Account/AccountSummary"},1500)):toastr.error(n.responseText)}})}function e(n){var i=$("#CustomerId").val();""===i&&(i=null);$.get("/account/RegisterValidation",{code:n,customerId:i},function(n){var r,u,f,e,o;n.success?(""!==n.data.Name&&(r=n.data.cardCost,""===i||null==i||"0.00"!=parseFloat(r).toFixed(2)&&0!=parseFloat(r).toFixed(2)&&0!=parseFloat(r).toFixed(2)?window.location.href=""!==i&&null!=i&&r>0?"/Account/SelectPayment/?country="+countrySelected+"&customerId="+parseInt(i)+"&membershipPlanId="+n.data.membershipPlanId+"&token="+n.data.token:"/Account/CreateAccount/?country="+countrySelected+"&membershipPlanId="+n.data.membershipPlanId+"&token="+n.data.token:(u=countrySelected,f=parseInt(i),e=n.data.membershipPlanId,o=n.data.token,$.ajax({url:"/Account/CreateAddOnFree/?countryCode="+u+"&customerId="+f+"&membershipPlanId="+e+"&token="+o,beforeSend:function(){},type:"POST",data:null,cache:!1,complete:function(){},success:function(n){n.success?(n.data.id>0&&toastr.success("Membership card created succesfully."),setTimeout(function(){window.location.href="/Account/AccountSummary"},1500)):null!==n.errorMessage&&toastr.error(n.errorMessage)},error:function(n){""===n.responseText?(toastr.success("Membership card created succesfully."),setTimeout(function(){window.location.href="/Account/AccountSummary"},1500)):($("#btnAccountSetup").prop("disabled",!1),toastr.error(n.responseText))}}))),$("#btnAccountSetup").removeClass("active"),$("#btnAccountSetup").prop("disabled",!1)):($.when(t("The registration code entered is invalid.",n.errorMessage)),$("#btnAccountSetup").removeClass("active"),$("#btnAccountSetup").prop("disabled",!1))})}function f(){var r,t;$("#Check").is(":checked")?(r="",r=null!=n?n.serialize():$("#btnContinuePayment").closest("form").serialize(),t=$("#Id").val(),""===t||"0"===t||void 0===t?$.ajax({url:"/PayPal/PayPalRequest",beforeSend:function(){$("#waitpaypal").show()},type:"POST",data:r,cache:!1,complete:function(){$("#waitpaypal").hide()},success:function(n){n.success?($("#customerPaymentProviderId").val(n.data),i=!0,$("#submitAccountForm").submit()):($("#submitAccountForm").prop("disabled",!1),toastr.error(n.errorMessage))},error:function(n){$("#submitAccountForm").prop("disabled",!1);toastr.error(n.responseText)}}):""!==t&&$.ajax({url:"/PayPal/AddOnPayPalRequest",beforeSend:function(){$("#waitpaypal").show()},type:"POST",data:r,cache:!1,complete:function(){$("#waitpaypal").hide()},success:function(n){n.success?($("#customerPaymentProviderId").val(n.data),i=!0,$("#submitAccountForm").submit()):($("#submitAccountForm").prop("disabled",!1),toastr.error(n.errorMessage))},error:function(n){$("#submitAccountForm").prop("disabled",!1);toastr.error(n.responseText)}})):($("#submitAccountForm").prop("disabled",!1),toastr.error("Please select agree terms and continue"))}var n,i=!1;return document.querySelectorAll(".accordion a"),{setUpEvents:function(){$(window).unload(function(){window.location.href="/Account/Logout"});$("#close_window").on("click",function(){window.close()});$("#btnBuyNow").unbind().click(function(){$(this).toggleClass("active");$(this).prop("disabled",!0);var n=$("#CustomerId").val();""===n?window.location.href="/Account/CreateAccount/?country="+countrySelected+"&membershipPlanId="+defaultMembershipPlan:""!==n&&function(n){$.get("/account/ValidateDefaultPlan",{customerId:n},function(i){i.success?window.location.href="/Account/SelectPayment/?country="+countrySelected+"&customerId="+parseInt(n)+"&membershipPlanId="+defaultMembershipPlan:($.when(t("Warning!",i.errorMessage)),$("#btnBuyNow").removeClass("active"),$("#btnBuyNow").prop("disabled",!1))})}(n)});$("#btnAccountSetup").unbind().click(function(n){n.preventDefault();$(this).toggleClass("active");$(this).prop("disabled",!0);var t=$("#registerCode").val();null!=t&&""!==t?e(t):(toastr.error("Please enter registration code and continue"),$(this).toggleClass("active"),$(this).prop("disabled",!1))});$("#Tick").is(":checked")?($(".bothcards").show(),$(".singlecard").hide(),$("#hostedbuttonid").val($("#SubscribeAppAndCardRef").val())):($("#Addressone").attr("disabled",!0),$("#Addresstwo").attr("disabled",!0),$("#Addressthree").attr("disabled",!0),$("#Town").attr("disabled",!0),$("#County").attr("disabled",!0),$("#hostedbuttonid").val($("#SubscribeAppRef").val()),$(".bothcards").hide(),$(".singlecard").show());$("#Tick").change(function(n){n.preventDefault();$("#Tick").is(":checked")?($("#Addressone").removeAttr("disabled"),$("#Addresstwo").removeAttr("disabled"),$("#Addressthree").removeAttr("disabled"),$("#Town").removeAttr("disabled"),$("#County").removeAttr("disabled"),$("#hostedbuttonid").val($("#SubscribeAppAndCardRef").val()),$(".bothcards").show(),$(".singlecard").hide()):($("#Addressone").attr("disabled",!0),$("#Addresstwo").attr("disabled",!0),$("#Addressthree").attr("disabled",!0),$("#Town").attr("disabled",!0),$("#County").attr("disabled",!0),$("#hostedbuttonid").val($("#SubscribeAppRef").val()),$(".bothcards").hide(),$(".singlecard").show())});$("#btnContinue").unbind().click(function(t){var i,f,u;t.preventDefault();$(this).toggleClass("active");$(this).prop("disabled",!0);i=$(this).closest("form");i.valid()?$("#Email").val()!==$("#Confirmemail").val()?($(this).toggleClass("active"),$(this).prop("disabled",!1),toastr.error("Email and confirm email do not match")):$("#Password").val()!==$("#ConfirmPassword").val()?($(this).toggleClass("active"),$(this).prop("disabled",!1),toastr.error("Password and confirm password do not match")):$("#Check").is(":checked")?(f=$("#Token").val(),u=parseFloat($("#CardCost").val()).toFixed(2),null==f||""===f||"0.00"!==u&&0!==u&&0!==u?(n=i,$(".accountFormDiv").addClass("hidden"),$("#ChoosePaymentScreen").removeClass("hidden"),window.scrollTo(0,0)):r(i)):($(this).prop("disabled",!1),$(this).toggleClass("active"),toastr.error("Please select agree terms and continue")):(toastr.error("The * fields are required."),$(this).toggleClass("active"),$(this).prop("disabled",!1))});$("a, button").click(function(){$(this).toggleClass("active")}),function(n){n.fn.circliful=function(t){var i=n.extend({fgcolor:"#556b2f",bgcolor:"#eee",fill:!1,width:15,dimension:200,fontsize:15,percent:50,animationstep:1,iconsize:"20px",iconcolor:"#999",border:"default",complete:null},t);return this.each(function(){function tt(t,i,u){n("<span><\/span>").appendTo(t).addClass(i).text(c).prepend(v).css({"line-height":u+"px","font-size":r.fontsize+"px"})}function it(t,i){n("<span><\/span>").appendTo(t).addClass("circle-info-half").css("line-height",r.dimension*i+"px")}var c,rt=["fgcolor","bgcolor","fill","width","dimension","fontsize","animationstep","endPercent","icon","iconcolor","iconsize","border"],r={},v="",e=0,f=n(this),y=!1,l;(f.addClass("circliful"),function(t){n.each(rt,function(u,f){r[f]=void 0!==t.data(f)?t.data(f):n(i).attr(f);"fill"==f&&void 0!==t.data("fill")&&(y=!0)})}(f),void 0!==f.data("text")&&(c=f.data("text"),void 0!==f.data("icon")&&(v=n("<i><\/i>").addClass("fa "+n(this).data("icon")).css({color:r.iconcolor,"font-size":r.iconsize})),void 0!==f.data("type")&&"half"===(h=n(this).data("type"))?tt(f,"circle-text-half",r.dimension/1.45):tt(f,"circle-text",r.dimension)),void 0!==n(this).data("total")&&null!=n(this).data("part"))?(l=n(this).data("total")/100,(n(this).data("part")/l/100).toFixed(3),e=(n(this).data("part")/l).toFixed(3)):void 0!==n(this).data("percent")?(n(this).data("percent"),e=n(this).data("percent")):i.percent;void 0!==n(this).data("info")&&(n(this).data("info"),void 0!==n(this).data("type")?(h=n(this).data("type"),it(f,"half"===h?.9:1.25)):it(f,1.25));n(this).width(r.dimension+"px");var o=n("<canvas><\/canvas>").attr({width:r.dimension,height:r.dimension}).appendTo(n(this)).get(0),u=o.getContext("2d"),p=o.width/2,w=o.height/2,b=(r.percent,Math.PI,o.width/2.5),k=2.3*Math.PI,d=0,s=0===r.animationstep?e:0,ut=Math.max(r.animationstep,0),g=2*Math.PI,a=Math.PI/2,h="",nt=!0;void 0!==n(this).data("type")&&"half"===(h=n(this).data("type"))&&(k=2*Math.PI,d=3.13,g=1*Math.PI,a=Math.PI/.996),function c(i){u.clearRect(0,0,o.width,o.height);u.beginPath();u.arc(p,w,b,d,k,!1);u.lineWidth=r.width+1;u.strokeStyle=r.bgcolor;u.stroke();y&&(u.fillStyle=r.fill,u.fill());u.beginPath();u.arc(p,w,b,-a,g*i-a,!1);"outline"===r.border?u.lineWidth=r.width+13:"inline"===r.border&&(u.lineWidth=r.width-13);u.strokeStyle=r.fgcolor;u.stroke();s<e&&(s+=ut,requestAnimationFrame(function(){c(Math.min(s,e)/100)},f));s===e&&nt&&void 0!==t&&n.isFunction(t.complete)&&(t.complete(),nt=!1)}(s/100)})}}(jQuery);$(document).ready(function(){$(".pendingCh").circliful();$(".confirmedCh").circliful();$(".receivedCh").circliful()});$("#question-mark-pending").click(function(){$.when(t("Pending Title","Pending Message"))});$("#question-mark-confirmed").click(function(){$.when(t("Confirmed Title"," Confirmed Message"))});$("#question-mark-received").click(function(){$.when(t("Received Title"," Received Message"))});$("input[type=radio][name=PaymentType]").change(function(){"PayPal"===this.value?($("#paypalbutton").show(),$("#btnContinuePayment").hide()):($("#paypalbutton").hide(),$("#btnContinuePayment").show())});$("#btnContinuePayment").unbind().click(function(t){if(t.preventDefault(),$(this).prop("disabled",!0),$("input[type=radio][name=PaymentType]").prev().length>0){var i=$("input[type=radio][name=PaymentType]:checked").val();void 0===i||""===i?($(this).prop("disabled",!1),$(this).toggleClass("active"),toastr.error("Please select Payment Option")):$("#Check").is(":checked")?"Cashback"===i.trim()&&(void 0===n?u($(this).closest("form")):r(n)):($(this).prop("disabled",!1),$(this).toggleClass("active"),toastr.error("Please select agree terms and continue"))}else $("#Check").is(":checked")?"Cashback"===i.trim()&&(void 0===n?u($(this).closest("form")):r(n)):($(this).prop("disabled",!1),$(this).toggleClass("active"),toastr.error("Please select agree terms and continue"))});$("#submitAccountForm").unbind().submit(function(){if($(this).prop("disabled",!0),i)return i=!1,!0;if($("input[type=radio][name=PaymentType]").prev().length>0){var n=$("input[type=radio][name=PaymentType]:checked").val();void 0===n||""===n?($(this).prop("disabled",!1),toastr.error("Please select Payment Option")):f()}else f();return!1});$("#btnback").click(function(){$("#AccountFormDiv").removeClass("hidden");$("#ChoosePaymentScreen").addClass("hidden");$("#btnContinue").toggleClass("active");window.scrollTo(0,0)});$("#btnPaymentback").click(function(n){n.preventDefault();window.history.back()});$("#statementPaging #pager a").each(function(){$(this).unbind().click(function(n){n.preventDefault(),function(n,t,i,r){window.location.href="/Account/AccountStatement/?country="+countrySelected+"&customerId="+t+"&cardId="+i+"&currentPage="+n+"&accountStatus"+r}($(this).attr("pagenumber"),$(this).closest("#CustomerId"),$(this).closest("#CardId"),$(this).closest("#AccountStatus"))})});$("#CardId").change(function(n){n.preventDefault();var t=$(this).find(":selected").val(),i=$("#CustomerId").val();""!==t&&""!==i&&function(n,t){window.location.href="/Account/AccountSummary/?country="+countrySelected+"&customerId="+t+"&cardId="+n}(t,i)});$(".paylatercash").hide()},termsHidden:function(){$(".search").hide();$("#myTopnav").hide();$(".mm-dropdown").hide()},planDescription:function(){var n;n=200;$(".planDescDiv").each(function(){var t=$(this).text().trim(),i=t.slice(0,n)+"<span class='ellipsis'>&nbsp;<\/span><a href='#' class='more'>Read more<\/a><span style='display:none'>"+t.slice(n,t.length)+"<a href='#' class='less'>Hide<\/a><\/span>";t.length<n||$(this).html(i)});$(".more").click(function(n){n.preventDefault();$(this).hide().prev().hide();$(this).next().show()});$(".less").click(function(n){n.preventDefault();$(this).parent().hide().prev().show().prev().show()})}}}();