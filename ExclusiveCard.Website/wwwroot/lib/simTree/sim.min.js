!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};t.m=n;t.c=i;t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})};t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})};t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r};t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i};t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};t.p="";t(t.s=0)}([function(n,t,i){"use strict";i(1),function(n){if(!n||!n.document)throw new Error("simTree need window");!function(n){var i,r=n.document,o={linkParent:!1,response:{name:"name",id:"id",pid:"pid",checked:"checked",open:"open",disabled:"disabled",slug:"slug"}},u=function(n){throw new Error(n);},s=function(n,t){return n.replace(/\{\{(.+?)\}\}/g,function(n,i){return t[i]?t[i]:""})},t=function n(t){if("undefined"==typeof $&&u("simTreeneed jquery"),$.isPlainObject(t)){if(t.el||u("你没有传el"),!(this instanceof n))return new n(t);this.options=$.extend(!0,{},o,t);this.init()}},f=[],e=[];t.prototype={version:"0.0.2",constructor:t,on:function(n,t,i){var r,u;return this.handles[n]=this.handles[n]||[],r=this.handles[n].isTriggered,u=this.handles[n].args,$.isFunction(t)&&(!0===i?this.handles[n]=[t]:this.handles[n].push(t),r&&t.call(this,u)),this},off:function(n){return this.handles[n]=[],this},trigger:function(n,t){var i,r;for(this.handles[n]=this.handles[n]||[],i=0,r=this.handles[n].length,this.handles[n].isTriggered=!0,this.handles[n].args=t;i<r;i++)this.handles[n][i].call(this,t)},init:function(){var n=this.options,t=n.data;this.handles={};this.$el=$(n.el);this.data=t;this.event();this.render()},dataCallback:function(){var n=arguments;1===n.length?this.render(n[0]):this.doRender(n[0],n[1])},parse:function(n){var f=this.options,e=f.response,o=[],s={},t=0,h=n.length,l=e.id,a=e.pid,i,r;if(f.childNodeAsy)return n;for(;t<h;t++){if(i=n[t],r=i[l],i.children)return n;r&&(s[r]=i)}for(t=0;t<h;t++){var i=n[t],c=i[a],u=s[c];c&&u?(u.children||(u.children=[])).push(i):o.push(i)}return o},render:function(n){var n=n||this.data;$.isFunction(n)&&n({},this.dataCallback.bind(this));$.isArray(n)&&(n=this.parse(n),this.doRender(this.$el,n))},doRender:function(n,t,i){var u,o,c,l,b,d=this,a=this.options,h=a.response,k=t.length,v=0,y=h.id,g=h.name,nt=h.slug,i=i||1,p='<i data-type="{{asy}}" class="sim-tree-spread {{spreadIcon}}"><\/i><a href="javascript:;"><i class="sim-tree-checkbox" uslug="{{slugUrl}}"><\/i>{{text}}<\/a>',tt=n===this.$el,w=$(r.createElement("ul")),it=a.childNodeAsy?"asy":"";for(a.check||(p=p.replace('<i class="sim-tree-checkbox"  uslug="{{slugUrl}}"><\/i>',""));v<k;v++)u=t[v],o=r.createElement("li"),l=!!u.children,b=u[h.disabled],o.innerHTML=s(p,{asy:it,text:u[g],slugUrl:u[nt],spreadIcon:l?"layui-icon-r":"hidden"}),o.setAttribute("data-level",i),o.setAttribute("data-id",u[y]),b&&o.setAttribute("class","disabled"),(c=$(o)).data("data",u),w.append(c),l&&this.doRender(c,u.children,i+1),u[h.checked]&&f.push(u[y]),u[h.open]&&e.push(u[y]);k&&n.append(w);tt&&(w.addClass("sim-tree"),this.trigger("done",t),$.each(e,function(n,t){d.expandNode(t)}),this.setSelected(f))},event:function(){var n=this;this.$el.off("click").on("click",function(t){var i=$(t.target);return i.hasClass("sim-tree-spread")&&n.spread.call(n,i),i.hasClass("sim-tree-checkbox")&&(i=i.parent()),"a"===i[0].tagName.toLowerCase()&&n.clickNode.call(n,i),!1});this.$el.on("selectstart",function(){return!1});this.options.done&&this.on("done",this.options.done);this.options.onClick&&this.on("click",this.options.onClick);this.options.onChange&&this.on("change",this.options.onChange);this.options.onSearch&&this.on("search",this.options.onSearch)},spread:function(n){n.hasClass("layui-icon-r")?this.doSpread(n,!0):this.doSpread(n,!1)},doSpread:function(n,t){var i=n.parent(),r=i.children("ul"),u=i.data("data");u.children&&(t?(n.removeClass("layui-icon-r").addClass("layui-icon-d"),"asy"===n.data("type")&&$.isFunction(this.data)&&(this.data(i.data("data"),this.dataCallback.bind(this,i)),r=i.children("ul"),n.data("type","")),r.addClass("show")):(n.removeClass("layui-icon-d").addClass("layui-icon-r"),r.removeClass("show")))},clickNode:function(n){var t,o,s,c=this,u=n.parent(),h=this.$el.find("li"),l=h.length,f=0,r=[],e=!1;if(!u.hasClass("disabled")){if(this.options.check)for(e=!0,this.doCheck(n.find(".sim-tree-checkbox")),this.options.linkParent&&(o=u.children("ul"),s=o.find(".sim-tree-checkbox"),$.each(s,function(){c.doCheck($(this),u.data("checked"),!0)}));f<l;f++)!0===(t=h.eq(f).data()).checked&&r.push(t.data);else i&&i.css("font-weight","normal"),n.css("font-weight","bold"),i=n,t=u.data("data"),r=[t],e=!this.sels||!(this.sels[0]===t);this.sels=r;this.trigger("click",r);e&&this.trigger("change",r)}},doCheck:function(n,t,i){var r=n.closest("li"),u=r.data();void 0===t&&(t=!u.checked);!0===t?n.removeClass("sim-tree-semi").addClass("checked"):!1===t?n.removeClass("checked sim-tree-semi"):"semi"===t&&n.removeClass("checked").addClass("sim-tree-semi");r.data("checked",t);!0===this.options.linkParent&&!i&&this.setParentCheck(r)},setParentCheck:function(n){var t,r=n.parent("ul"),u=r.parent("li"),f=r.children("li"),i=u.find(">a .sim-tree-checkbox"),e=[],o=f.length;u.length&&(n.find(">a .sim-tree-checkbox").hasClass("sim-tree-semi")?this.doCheck(i,"semi"):($.each(f,function(){!0===$(this).data("checked")&&e.push($(this))}),t=e.length,o===t&&this.doCheck(i,!0),t||this.doCheck(i,!1),t>=1&&t<o&&this.doCheck(i,"semi")))},search:function(n){if(this.$el){var f,t,i,n=$.trim(n),r=this.$el.find("li"),u=0,e=r.length,o=[];for(r.hide().children(".sim-tree-spread").addClass("hidden");u<e;u++)t=r.eq(u),f=t.children("a").text(),i=t.data("data"),n?-1!==f.indexOf(n)&&(1!==parseInt(t.data("level"))&&this.expandNode(i[this.options.response.pid]),t.parents("li").add(t).show(),o.push(t)):(t.show(),i.children&&t.children(".sim-tree-spread").removeClass("hidden"));this.trigger("search",n)}},expandNode:function(n){var t=n.addClass?n:this.$el.find("[data-id="+n+"]"),r=t.data("data"),u=r[this.options.response.pid],i=t.children(".sim-tree-spread"),f=parseInt(t.data("level"));r.children&&i.length&&(i.removeClass("hidden"),this.doSpread(i,!0));1!==f&&this.expandNode(u)},setSelected:function(n){var i=this,t=n,r=[],u=[];"string"!=typeof t&&"number"!=typeof t||(t=[t]);$.isArray(t)&&(this.options.check||(t=[t[0]]),$.each(t,function(n,t){var f=i.$el.find("[data-id="+t+"]"),e=f.children("a"),o=e.children(".sim-tree-checkbox"),s=f.data("data");if(!f.length)return!0;o.length?i.doCheck(o,!0):e.css("font-weight","bold");1!==parseInt(f.data("level"))&&i.expandNode(s[i.options.response.pid]);r.push(s);u.push(f[0])}),i.sels=r,i.trigger("click",r))},getSelected:function(){return this.sels},disableNode:function(n){var i=this,t=n;"string"!=typeof t&&"number"!=typeof t||(t=[t]);$.isArray(t)&&$.each(t,function(n,t){var r=i.$el.find("[data-id="+t+"]");r.addClass("disabled")})},destroy:function(){for(var n in this.$el.html(""),this)delete this[n]},refresh:function(n){this.$el.html("");this.render(n)}};n.simTree=t;$.fn.simTree=function(n){return n=$.extend(!0,{el:this},n),t(n)}}(n)}("undefined"!=typeof window?window:void 0)},function(){}]);